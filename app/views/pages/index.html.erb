<div id="map_container" class="google-map-container star-map-container">
  <div id="map_canvas" class="google-map canvas-map"></div>
  <div class="star-map-overflow">
    <div id="star_canvas" class="star-map canvas-stars"></div>
  </div>
</div>

<div class="row">
  <div class="col-xs-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
      <div class="scroll-pane">
        <div class="card first">
          <div class="card-block">
            <h1 class="h1 card-title">EDM Alert</h4>
            <% if not user_signed_in? %>
              <p class="p lead">EDM Alert ใช้ข้อมูลระบบเรียลไทม์ จากหน่วยงานรัฐบาล แจ้งเตือนคุณให้เตรียมพร้อมรับมือ และปลอดภัยจากภัยพิบัติ</p>
            <% end %>
          </div>
          <div class="card-block">
            <% if user_signed_in? %>
                <p class="p">สวัสดี คุณ, <%= current_user.full_name %></p>
            <% else %>
              <%= link_to "สมัคร", new_user_registration_path, class: "btn btn-lg btn-primary" %>
              <%= link_to "เข้าสู่ระบบ", new_user_session_path, class: "btn btn-lg btn-default" %>
            <% end %>
          </div>
        </div>
      </div>

  </div>
</div>

<script src="//maps.google.com/maps/api/js?key=AIzaSyA9Vvu2Aoagb5nERWzWpGKeKEByL916S-8"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->

<script type="text/javascript">
handler = Gmaps.build('Google');
handler.buildMap({
    provider: {
      disableDefaultUI: true,
      minZoom: 3,
      scaleControl: true,
      zoomControl: true
    },
    internal: {
      id: 'map_canvas'
    }
  },
  function(){
    var json_array = <%=raw @hash.to_json %>
    var markers = handler.addMarkers(json_array);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
  }
);
</script>
